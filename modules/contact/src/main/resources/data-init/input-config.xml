<?xml version="1.0"?>
<csv-inputs xmlns="http://axelor.com/xml/ns/data-import"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://axelor.com/xml/ns/data-import
    https://axelor.com/xml/ns/data-import/data-import_6.0.xsd">
    
    <input file="contact_country.csv" type="com.axelor.contact.db.Country" separator=";" search="self.code = :code" />
    <input file="contact_address.csv" type="com.axelor.contact.db.Address" separator=";" search="self.importId = :Ref">
        <bind to="importId" column="Ref"/>
        <bind to="numberAndStreet"/>
        <bind to="zip"/>
        <bind to="city"/>
        <bind to="country" column="country_code" search="self.code=:country_code" update="true"/>
        <bind to="fullName" eval='"${numberAndStreet} " +" "+ "${zip} " +" "+ "${city}"'/>
    </input>
    <input file="contact_title.csv" type="com.axelor.contact.db.Title" separator=";" search="self.code = :code" />
    
    <input file="contact_contact.csv" type="com.axelor.contact.db.Contact" separator=";">
       <bind to="title" search="self.code= :title" column="title" update="true"/>
        <bind to="firstName" column="firstName"/>
        <bind to="lastName" column="lastName"/>
        <bind to="fullName" eval="${title.Name}+' '+${firstName}+' '+${lastName}"></bind>
        <bind to="birthDate" column="birthDate" adapter="LocalDate"></bind>
        <bind to="email" column="email"></bind>
        <bind to="phone" column="phone"></bind>
        <bind to="isSubjectToTaxes" column="isSubjectToTaxes"></bind>
        <bind to="address" search="self.importId= :address_importId" update="true"></bind>
    </input>
    
        <input file="auth_permission.csv" type="com.axelor.auth.db.Permission" separator=";" search="self.name = :name">
        <bind to="canCreate" column="canCreate"/>
        <bind to="canRead" column="canRead" />
        <bind to="canExport" column="canExport" />
        <bind to="canRemove" column="canRemove" />
        <bind to="canWrite" column="canWrite" />
        <bind to="name" column="name" />
        <bind to="object" column="object" />
        <bind to="roles" column="roles" />
        <bind to="conditionValue" column="conditionValue" />
        <bind to="conditionParam" column="conditionParam" />
    </input>
    
    <input file="meta_permission.csv" type="com.axelor.meta.db.MetaPermission" separator=";">
        <bind to="name" column="name"/>
        <bind to="object" column="object"/>
    </input>
    
   <input file="meta_permission_rule.csv" type="com.axelor.meta.db.MetaPermissionRule" separator=";">
           <bind to="canRead" column="canRead"/>
        <bind to="canExport" column="canExport"/>
        <bind to="canWrite" column="canWrite"/>
        <bind to="field" column="field"/>
          <bind to="metaPermission" column="metaPermission" search="self.name = : metaPermission"/>
  </input>
    <input file="auth_role.csv" type="com.axelor.auth.db.Role" separator=";" search="self.name = :name">
        <bind to="description" column="description"/>
        <bind to="name" column="name"/>
        <bind to="menus" column="menus"  search="self.name in :menus" eval="menus.split('|') as List"/>
        <bind to="permissions" column="permissions"  search="self.name in :permissions"  eval="permissions.split('|') as List"/>
        <bind to="metaPermissions" column="metaPermissions" search="self.name in :metaPermissions"/>
    </input>
    
    <input file="auth_user.csv" type="com.axelor.auth.db.User" separator=";">
        <bind to="code" column="code"/>
        <bind to="email" column="email"/>
        <bind to="name" column="name"/>
        <bind to="password" column="password"/>
        <bind to="roles" column="roles" search="self.name=:roles"/>
    </input>
    
</csv-inputs>
