<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://axelor.com/xml/ns/object-views
  https://axelor.com/xml/ns/object-views/object-views_6.0.xsd">
  
 
  	<cards name="contact-card" model="com.axelor.contact.db.Contact" title="Contacts">
	
		<field name="fullName"/>
		<field name="image"/>
		<field name="phone"/>
		<field name="email"/>
		<field name="address"/>
		
		<template>
			<![CDATA[
				<div class="span4 card-image">
				    <strong>{{fullName}}</strong>
				    <br>
				    <img ng-src="{{$image(null, 'image')}}">
				</div>
				
				<div class="span8">
				    <br>
				    <i class="fa fa-phone" ng-if="phone"> </i> {{phone}}
				    <br>
				    <i class="fa fa-at" ng-if="email"> </i> {{email}}
				    <br>
				    <i class="fa fa-envelope" ng-if="address.fullName"> </i> {{address.fullName}}
				    <br>
				</div>
			]]>
		</template>
	</cards>

    <grid name="contact-grid" title="Contacts" model="com.axelor.contact.db.Contact">

        <field name="fullName"/>
        <field name="birthDate"/>
        <field name="email" />
        <field name="phone" />
        <field name="isSubjectToTaxes" />
        <field name="address" />
        <field name="Archived" />
		<button onClick="action-contact-view-show-related-sale-details-in-popup" name="saleOrderLineList" title="Sale orders" icon="fa-print"/>
		
    </grid>
	
	<form model="com.axelor.contact.db.Contact" title="Contact" name="contact-form" width="large">
		<panel title="Profile" name="contactPanel" >
			<panel colSpan="3">
				<field name="image" widget="image" />
			</panel>
			<panel colSpan="9" >
				<field name="firstName"/>
				<field name="lastName"/>
				<field name="title"/>
				<field name="birthDate" onChange="action-contact-condition-birth-date"/>				
			</panel>
		</panel>
		
		<panel-tabs name="contactInfoPanelTab">
			<panel title="Contact" name="contactInfoPanel">
				<field name="email" colSpan="3" />
				<field name="phone" colSpan="3" widget="phone"/>
				<field name="address"/>
			</panel>
			<panel title="Other informations" name="otherInfoPanel">
				<field name="isSubjectToTaxes" widget="boolean-switch"/>
				<field name="familyContactSet"  widget="tagSelect"/>
			</panel>
		</panel-tabs>
		<panel-dashlet action="action.sale.data.view.sale.order.line.contact" title="Related sale order details"/>
		
		<panel-mail name="contactPanelMail">
			<mail-messages limit="5"/>
			<mail-followers/>
		</panel-mail>

	</form>
	
	  <action-view name="action-contact-view-show-related-sale-details-in-popup" title="Sale orders" model="com.axelor.sale.db.SaleOrderLine">
    	<view type="grid" name="sale-order-line-grid-form-menu"/>
    	<view-param name="popup" value="true" />
		<view-param name="limit" value="20"/>
    	<domain>self.saleOrder.customer = :data</domain>
    	<context name="data" expr="eval:__self__"/>
    </action-view>
	
	<action-condition name="action-contact-condition-birth-date" model="com.axelor.contact.db.Contact">
		<check field="birthDate" if="birthDate &lt; LocalDate.of(1930,1,1)" error="Should be &gt; to 1930" />	
	</action-condition>

</object-views>